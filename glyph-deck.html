<html>
<head>
    <title>Spellcasting Services Calculator</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }

        main {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        #table {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            display: flex;
        }
        .tableZone {
            flex: 1;
        }

        .card {
            width: 170px;
            height: 232px;
            border: 2px rgb(200, 0, 120) solid;
            box-shadow: 10px 5px 5px rgba(0, 0, 0, 0.3);
            background-color: rgba(255, 0, 120, 0.15);
        }
        .card img {
            width: 170px;
            height: 232px;
        }

        .card.selected {
            width: 342px;
            height: 465px;
        }
        .card.selected img {
            width: 342px;
            height: 465px;
        }
    </style>
</head>
<body>

<main>
    <h1>Elder Runes</h1>

    <div id="table">
        <div id="deck" class="tableZone"></div>
        <div id="currentCard" class="tableZone"></div>
        <div id="discard" class="tableZone"></div>
    </div>

</main>
</body>
<script>
    function randomInt(max) {
      return Math.floor(Math.random() * Math.floor(max));
    }
    function shuffle(cardNames) {
        const unused = cardNames.slice(0);
        const shuffled = [];
        while(shuffled.length < cardNames.length) {
            const [randomCard] = unused.splice(randomInt(unused.length), 1);
            shuffled.push(randomCard);
        }
        return shuffled;
    }
    function createCard(name, faceDown=false) {
        const card = document.createElement('div');
        card.className = "card";
        card.id = `card-${name}`;
        if(! faceDown) {
            card.innerHTML = `<img src="img/${name}.jpg" />`;
        }
        return card;
    }

    const dooberry = async () => {
        const cardNames = shuffle( await fetch("data-files/elder-runes.json").then(res => res.json()) );
        const cards = cardNames.map(name => createCard(name, false));
        cards.forEach(card => document.querySelector('#deck').appendChild(card));
    };
    dooberry();
</script>
</html>